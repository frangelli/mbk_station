var mbkStation=angular.module("mbkStation",["ngCookies","ngSanitize","ui.router","angular-loading-bar","angularCharts"]);mbkStation.config(["$stateProvider","$urlRouterProvider",function(a,b){var c={index:{url:"",controller:["$location",function(a){a.path("/painel")}]},404:{url:"/404",templateUrl:"/views/shared/404.html"},main:{"abstract":!0,templateUrl:"/views/main.html",controller:"MainController"},"main.dashboard":{url:"/painel",views:{"content@main":{templateUrl:"/views/dashboard.html",controller:"DashboardController"}}},"main.advogados":{url:"/advogados",views:{"content@main":{templateUrl:"/views/prazos_por_advogado.html"}}}};angular.forEach(c,function(b,c){a.state(c,b)}),b.otherwise("/404")}]),mbkStation.controller("MainController",["$rootScope","$scope","$state",function(a,b,c){b.$state=c,b.start_date=moment().format("DD/MM/YYYY"),b.end_date=moment().format("DD/MM/YYYY"),b.filterData=function(){a.$broadcast("dateChanged",{start_date:b.start_date,end_date:b.end_date})}}]),mbkStation.controller("DashboardController",["$scope","$http",function(a,b){b({method:"GET",url:"http://localhost:3000/home.json"}).success(function(b){a.teste=b}).error(function(){})}]),mbkStation.controller("PrazosPorAdvogadoController",["$rootScope","$scope","ChartsService",function(a,b,c){function d(a){b.dataForBar=a;var c=JSON.parse(JSON.stringify(a));angular.forEach(c.data,function(a,b){var d=0;angular.forEach(a.y,function(a){d+=a}),c.data[b].y=[d]}),b.dataForPie=JSON.parse(JSON.stringify(c)),b.prazos_por_advogado_data="bar"==b.chart_type?b.dataForBar:b.dataForPie}function e(a,b){b.grupo="Advogados",c.getPrazosPorAdvogado(b).then(function(a){d(a)})}var f={title:"Prazos por Advogado",tooltips:!0,labels:!1,legend:{display:!0,position:"right"},innerRadius:0,lineLegend:"lineEnd"};b.prazos_por_advogado_chart_config=f,b.chart_type="bar",e(null,{start_date:b.start_date,end_date:b.end_date,grupo:"Advogados"}),b.changeChartType=changeChartType=function(a){b.prazos_por_advogado_data={},b.prazos_por_advogado_data="bar"==a?b.dataForBar:b.dataForPie,b.chart_type=a},b.$on("dateChanged",e)}]),mbkStation.service("ChartsService",["$http","$q",function(a,b){function c(b){var c=a({method:"get",url:"/situacao_prazo_por_funcionario/grafico.json",params:b});return c.then(d,e)}function d(a){return a.data}function e(a){return b.reject(angular.isObject(a.data)&&a.data.message?a.data.message:"An unknown error occurred.")}return{getPrazosPorAdvogado:c}}]),mbkStation.directive("dateField",[function(){return{restrict:"A",scope:{},link:function(a,b){b.datepicker({dateFormat:"dd/mm/yy",defaultDate:new Date})}}}]),mbkStation.directive("toggle",[function(){return{restrict:"A",scope:{},link:function(a,b,c){b.on("click",function(a){a.preventDefault();var b=c.targets.split(",");angular.forEach(b,function(a){var b=$(a);b.slideToggle("slow")});var d=document.documentElement,e=$("body").css("margin-top");"70px"===e?($("body").css("margin-top","0px"),d.requestFullscreen?d.requestFullscreen():d.mozRequestFullScreen?d.mozRequestFullScreen():d.webkitRequestFullscreen?d.webkitRequestFullscreen():d.msRequestFullscreen&&d.msRequestFullscreen()):($("body").css("margin-top","70px"),document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen())})}}}]);