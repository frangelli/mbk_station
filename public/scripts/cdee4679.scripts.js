var mbkStation=angular.module("mbkStation",["ngCookies","ngSanitize","ui.router","angular-loading-bar","angularCharts"]);mbkStation.constant("DEV_MODE",!1),mbkStation.config(["$stateProvider","$urlRouterProvider",function(a,b){var c={index:{url:"",controller:["$location",function(a){a.path("/painel")}]},404:{url:"/404",templateUrl:"views/shared/404.html"},main:{"abstract":!0,templateUrl:"views/main.html",controller:"MainController"},"main.dashboard":{url:"/painel",views:{"content@main":{templateUrl:"views/dashboard.html",controller:"DashboardController"}}},"main.advogados":{url:"/advogados",views:{"content@main":{templateUrl:"views/prazos_por_advogado.html"}}},"main.administrativos":{url:"/administrativos",views:{"content@main":{templateUrl:"views/prazos_administrativos.html"}}},"main.intimacoes":{url:"/intimacoes",views:{"content@main":{templateUrl:"views/intimacoes_dia.html"}}}};angular.forEach(c,function(b,c){a.state(c,b)}),b.otherwise("/404")}]),mbkStation.controller("MainController",["$rootScope","$scope","$state","$interval",function(a,b,c,d){b.$state=c,b.start_date=moment().format("DD/MM/YYYY"),b.end_date=moment().format("DD/MM/YYYY"),b.filterData=function(){a.$broadcast("dateChanged",{start_date:b.start_date,end_date:b.end_date})},d(function(){a.$broadcast("dateChanged",{start_date:b.start_date,end_date:b.end_date})},9e5),b.available_states=["main.dashboard","main.advogados","main.administrativos","main.intimacoes"],b.current=0,d(function(){console.log("trocando state"),b.current<b.available_states.length-1?(b.current++,console.log("entrou no incremento")):b.current=0,console.log(b.available_states[b.current]),c.go(b.available_states[b.current])},6e4)}]),mbkStation.controller("DashboardController",["$scope","$http",function(){}]),mbkStation.controller("PrazosPorAdvogadoController",["$rootScope","$scope","ChartsService",function(a,b,c){function d(a){b.dataForBar=a;var c=JSON.parse(JSON.stringify(a));angular.forEach(c.data,function(a,b){var d=0;angular.forEach(a.y,function(a){d+=a}),c.data[b].y=[d]}),b.dataForPie=JSON.parse(JSON.stringify(c)),b.prazos_por_advogado_data="bar"==b.chart_type?b.dataForBar:b.dataForPie}function e(a,b){console.log("EVENT LISTENER ADVOGADOS"),b.grupo="Advogados",c.getPrazosPorAdvogado(b).then(function(a){d(a)})}var f={title:"Prazos por Advogado",tooltips:!0,labels:!0,legend:{display:!0,position:"right"},innerRadius:0,lineLegend:"traditional"};b.prazos_por_advogado_chart_config=f,b.chart_type="bar",e(null,{start_date:b.start_date,end_date:b.end_date,grupo:"Advogados"}),b.changeChartType=changeChartType=function(a){b.prazos_por_advogado_data={},"bar"==a?b.prazos_por_advogado_data=b.dataForBar:(b.prazos_por_advogado_data=b.dataForPie,console.log(JSON.stringify(b.dataForPie))),b.chart_type=a},b.$on("dateChanged",e)}]),mbkStation.controller("PrazosAdministrativosController",["$rootScope","$scope","ChartsService",function(a,b,c){function d(a){b.dataForBar=a;var c=JSON.parse(JSON.stringify(a));angular.forEach(c.data,function(a,b){var d=0;angular.forEach(a.y,function(a){d+=a}),c.data[b].y=[d]}),b.dataForPie=JSON.parse(JSON.stringify(c)),b.prazos_administrativos="bar"==b.chart_type?b.dataForBar:b.dataForPie}function e(a,b){console.log("EVENT LISTENER ADM"),b.grupo="Administrativo",c.getPrazosAdministrativos(b).then(function(a){d(a)})}var f={title:"Prazos Administrativos",tooltips:!0,labels:!0,legend:{display:!0,position:"right"},innerRadius:0,lineLegend:"lineEnd"};b.prazos_administrativos_chart_config=f,b.chart_type="bar",e(null,{start_date:b.start_date,end_date:b.end_date,grupo:"Administrativo"}),b.changeChartType=changeChartType=function(a){b.prazos_administrativos={},b.prazos_administrativos="bar"==a?b.dataForBar:b.dataForPie,b.chart_type=a},b.$on("dateChanged",e)}]),mbkStation.controller("IntimacoesController",["$rootScope","$scope","ChartsService",function(a,b,c){function d(a){b.intimacoes_dia_data=a}function e(a,b){console.log("EVENT LISTENER INTIMACOES"),c.getIntimacoesByStatus(b).then(function(a){d(a)})}var f={title:"Setor de Intimações",tooltips:!0,labels:!0,legend:{display:!0,position:"right"},innerRadius:0,lineLegend:"traditional"};b.intimacoes_dia_chart_config=f,b.chart_type="pie",b.intimacoes_dia_data={},e(null,{start_date:b.start_date,end_date:b.end_date}),b.$on("dateChanged",e)}]),mbkStation.service("ChartsService",["$http","$q","DEV_MODE",function(a,b,c){function d(b){var d=a({method:"get",url:c?"http://127.0.0.1:3000/situacao_prazo_por_funcionario/grafico.json":"/situacao_prazo_por_funcionario/grafico.json",params:b});return d.then(g,h)}function e(b){var d=a({method:"get",url:c?"http://127.0.0.1:3000/situacao_prazo_por_funcionario/grafico.json":"/situacao_prazo_por_funcionario/grafico.json",params:b});return d.then(g,h)}function f(b){var d=a({method:"get",url:c?"http://127.0.0.1:3000/situacao_intimacoes_dia/grafico.json":"/situacao_intimacoes_dia/grafico.json",params:b});return d.then(g,h)}function g(a){return a.data}function h(a){return b.reject(angular.isObject(a.data)&&a.data.message?a.data.message:"An unknown error occurred.")}return{getPrazosPorAdvogado:d,getPrazosAdministrativos:e,getIntimacoesByStatus:f}}]),mbkStation.directive("dateField",[function(){return{restrict:"A",scope:{},link:function(a,b){b.datepicker({dateFormat:"dd/mm/yy",defaultDate:new Date})}}}]),mbkStation.directive("toggle",[function(){return{restrict:"A",scope:{},link:function(a,b,c){b.on("click",function(a){a.preventDefault();var b=c.targets.split(",");angular.forEach(b,function(a){var b=$(a);b.slideToggle("slow")});var d=document.documentElement,e=$("body").css("margin-top");"70px"===e?($("body").css("margin-top","0px"),d.requestFullscreen?d.requestFullscreen():d.mozRequestFullScreen?d.mozRequestFullScreen():d.webkitRequestFullscreen?d.webkitRequestFullscreen():d.msRequestFullscreen&&d.msRequestFullscreen()):($("body").css("margin-top","70px"),document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen())})}}}]);